<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script>
      // Exercise 1
      // Сделал версию, которая ищет простые числа до max.
      // Сначала используется решето Эрастофена, чтобы найти простые числа, меньшие чем sqrt of max.
      // Потом используется проверка на делимость с использованием первого массива простых чисел.
      const calcPrimesUpToN = (max) => {
        let n = 2;
        const primesUpToSqrtN = sieveOfEratosthenes(max);
        const primes = [];

        console.log('Exercise 1');
        console.log(`All primes from 0 to ${max}:`);

        while (n <= max) {
          if (!isDivisibleByPrimes(primesUpToSqrtN, n) || isPrimeUpToN(primesUpToSqrtN, n)) {
            primes.push(n);
            n++;
          } else {
            n++;
            continue;
          }
        }

        console.log(primes);
      }

      const isDivisibleByPrimes = (arr, n) => {
        for (var i = 0; i < arr.length; i++) {
          if (n % arr[i] == 0) {
            return true;
          }
        }
        return false;
      }

      const isPrimeUpToN = (arr, n) => {
        for (var i = 0; i < arr.length; i++) {
          if (arr.includes(n)) {
            return true;
          }
        }
        return false;
      }

      // Подсмотрел алгоритм решета в интернете, сделал немного измененную версию
      // https://www.craigrodrigues.com/blog/the-sieve-of-eratosthenes-in-javascript
      const sieveOfEratosthenes = max => {
        const sieve = new Array(Math.floor(Math.sqrt(max))).fill(true);

        for (var i = 2; i < sieve.length; i++) {
          if (sieve[i]) {
            for (var j = Math.pow(i, 2); j < max; j += i) {
              sieve[j] = false;
            }
          }
        }

        const primes = [];
        for (var i = 0; i < max; i++) {
          if (sieve[i] && i > 1) {
            primes.push(i);
          }
        }

        return primes;
      };

      calcPrimesUpToN(1000);

      // Exercise 2 (a)
      const basket = [
        {name: 'Product 1', price: 500, currency: 'usd'},
        {name: 'Product 2', price: 200, currency: 'usd'},
        {name: 'Product 3', price: 100, currency: 'usd'},
      ];

      // Exercise 2 (b)
      const countBasketPrice = arr => {
        let sum = 0;
        console.log('Exercise 2');
        for (var i = 0; i < arr.length; i++) {
          sum += arr[i].price;
        }
        console.log(`Sum total of chosen products is ${sum} ${arr[0].currency.toUpperCase()}.`);
      };

      countBasketPrice(basket);

      // Exercise 3
      const display0To9 = () => {
        for (var i = 0; i < 10; console.log(i++)) {;}
      };

      display0To9();

      // Exercise 4
      const drawPiramidInConsole = () => {
        const x = 'x';
        for (var i = 1; i <= 20; i++) {
          let str = '';
          for (var j = 0; j < i; j++) {
            str += x;
          }
          console.log(str);
        }
      };

      drawPiramidInConsole();
    </script>
  </body>
</html>
